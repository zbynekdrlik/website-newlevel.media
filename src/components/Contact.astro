---
import generalConfig from '../content/settings/general.json';
---

<section id="contact" class="py-20 md:py-28 bg-[var(--color-background-alt)] relative overflow-hidden">
  <!-- Decorative elements -->
  <div class="absolute top-10 right-[10%] w-64 h-64 bg-red-600/5 rounded-full blur-[100px]"></div>
  <div class="absolute bottom-10 left-[5%] w-48 h-48 bg-red-500/5 rounded-full blur-[80px]"></div>

  <!-- Top accent line -->
  <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-red-500/20 to-transparent"></div>

  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section header -->
    <div class="text-center mb-12 scroll-reveal">
      <span class="inline-block px-3 py-1 text-xs font-semibold tracking-[0.2em] text-red-400 uppercase bg-red-500/10 rounded-full border border-red-500/15 mb-4">
        Contact
      </span>
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4">
        Let&rsquo;s Work Together
      </h2>
      <p class="text-lg text-white/50 max-w-2xl mx-auto">
        Have a project in mind? We&rsquo;d love to hear from you.
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-5 gap-10 lg:gap-12">
      <!-- Contact info -->
      <div class="lg:col-span-2 scroll-reveal-left">
        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 bg-red-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
              </svg>
            </div>
            <div>
              <h3 class="text-white font-semibold mb-1">Email</h3>
              <a href={`mailto:${generalConfig.email}`} class="text-white/50 hover:text-red-400 transition-colors duration-200">{generalConfig.email}</a>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div class="w-10 h-10 bg-red-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
              </svg>
            </div>
            <div>
              <h3 class="text-white font-semibold mb-1">Location</h3>
              <p class="text-white/50">{generalConfig.location}</p>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div class="w-10 h-10 bg-red-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
            </div>
            <div>
              <h3 class="text-white font-semibold mb-1">Response Time</h3>
              <p class="text-white/50">Within {generalConfig.contact.responseTime}</p>
            </div>
          </div>

          <div class="mt-8 p-6 glass-dark rounded-2xl gradient-border">
            <p class="text-white/40 text-sm leading-relaxed">
              Whether you&rsquo;re looking for a complete technology solution or need help with a specific project, we&rsquo;re here to help. Tell us about your needs and we&rsquo;ll get back to you promptly.
            </p>
          </div>
        </div>
      </div>

      <!-- Contact form -->
      <div class="lg:col-span-3 scroll-reveal-right">
        <form id="contact-form" class="glass-dark rounded-2xl p-6 md:p-8 gradient-border">
          <!-- Honeypot -->
          <input type="checkbox" name="botcheck" class="hidden" style="display:none" />

          <div class="space-y-5">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
              <div>
                <label for="name" class="block text-sm font-medium text-white/70 mb-1.5">Name</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/25 focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-transparent transition-all duration-200"
                  placeholder="Your name"
                />
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-white/70 mb-1.5">Email</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/25 focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-transparent transition-all duration-200"
                  placeholder="your@email.com"
                />
              </div>
            </div>

            <div>
              <label for="service" class="block text-sm font-medium text-white/70 mb-1.5">Service of Interest</label>
              <select
                id="service"
                name="service"
                class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-transparent transition-all duration-200 appearance-none"
              >
                <option value="" class="bg-neutral-900">Select a service (optional)</option>
                <option value="Events Media" class="bg-neutral-900">Events Media</option>
                <option value="AI Automations" class="bg-neutral-900">AI Automations</option>
                <option value="Forecasting" class="bg-neutral-900">Forecasting</option>
                <option value="AI Vision" class="bg-neutral-900">AI Vision</option>
                <option value="Odoo Setup" class="bg-neutral-900">Odoo Setup</option>
                <option value="n8n Automations" class="bg-neutral-900">n8n Automations</option>
                <option value="Other" class="bg-neutral-900">Other</option>
              </select>
            </div>

            <div>
              <label for="message" class="block text-sm font-medium text-white/70 mb-1.5">Message</label>
              <textarea
                id="message"
                name="message"
                required
                rows="4"
                class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/25 focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-transparent transition-all duration-200 resize-none"
                placeholder="Tell us about your project..."
              ></textarea>
            </div>

            <!-- Status message -->
            <div id="form-status" class="hidden text-sm text-center py-3 px-4 rounded-xl transition-all duration-300"></div>

            <button
              id="submit-btn"
              type="submit"
              class="w-full px-8 py-4 bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] text-white font-semibold rounded-full transition-all duration-200 shadow-lg shadow-red-500/25 hover:shadow-red-500/40"
            >
              Send Message
            </button>
          </div>
        </form>
      </div>

      <script define:vars={{ web3formsKey: generalConfig.contact.web3formsKey }}>
        const form = document.getElementById('contact-form');
        const btn = document.getElementById('submit-btn');
        const status = document.getElementById('form-status');

        form.addEventListener('submit', async (e) => {
          e.preventDefault();

          btn.disabled = true;
          btn.textContent = 'Sending...';
          status.classList.add('hidden');

          const formData = new FormData(form);
          formData.append('access_key', web3formsKey);
          formData.append('subject', 'New inquiry from newlevel.media');
          formData.append('from_name', 'newlevel.media Website');

          try {
            const res = await fetch('https://api.web3forms.com/submit', {
              method: 'POST',
              body: formData,
            });
            const data = await res.json();

            if (data.success) {
              status.textContent = 'Message sent successfully. We\'ll get back to you soon.';
              status.className = 'text-sm text-center py-3 px-4 rounded-xl bg-green-500/10 text-green-400 border border-green-500/20';
              form.reset();
            } else {
              status.textContent = 'Something went wrong. Please try again.';
              status.className = 'text-sm text-center py-3 px-4 rounded-xl bg-red-500/10 text-red-400 border border-red-500/20';
            }
          } catch {
            status.textContent = 'Network error. Please try again later.';
            status.className = 'text-sm text-center py-3 px-4 rounded-xl bg-red-500/10 text-red-400 border border-red-500/20';
          }

          btn.disabled = false;
          btn.textContent = 'Send Message';

          setTimeout(() => {
            status.style.opacity = '0';
            setTimeout(() => { status.classList.add('hidden'); status.style.opacity = '1'; }, 300);
          }, 5000);
        });
      </script>
    </div>
  </div>
</section>
